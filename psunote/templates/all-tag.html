{% extends 'base.html' %}
{% block body %}
<ul class="nav justify-content-center" style="padding-top: 1em">
  <li class="nav-item">
    <a class="btn btn-primary" href="{{ url_for('index') }}">Home</a>
  </li>
</ul>
<h3 class="my-2">All Tags</h3>
<ul class="list-group">
  {% for tag in tags %}
  <li class="list-group-item d-flex justify-content-between align-items-center">
    <a href="{{ url_for('tags_view', tag_name=tag.name) }}">{{ tag.name }}</a>
    <div>
      <!-- ปุ่มแก้ไขยังใช้ไม่ได้ -->
      <a href="" class="btn btn-sm btn-warning">Edit</a>

      <!-- ฟอร์มเพื่อลบ Tag -->
      <form
        id="deleteTagForm{{ tag.id }}"
        action="{{ url_for('delete_tag', tag_id=tag.id) }}"
        method="POST"
        style="display: inline"
      >
        <button
          type="button"
          class="btn btn-sm btn-danger"
          data-bs-toggle="modal"
          data-bs-target="#exampleModal{{ tag.id }}"
        >
          Delete
        </button>
      </form>

      <!-- Modal ยืนยันการลบ-->
      <div
        class="modal fade"
        id="exampleModal{{ tag.id }}"
        tabindex="-1"
        aria-labelledby="exampleModalLabel{{ tag.id }}"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel{{ tag.id }}">
                Delete "{{ tag.name }}"
              </h1>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">Are you sure to delete this Tag?</div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Close
              </button>
              <button
                type="button"
                class="btn btn-danger"
                onclick="document.getElementById('deleteTagForm{{ tag.id }}').submit();"
              >
                Delete
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </li>
  {% endfor %}
</ul>
{% endblock %}
